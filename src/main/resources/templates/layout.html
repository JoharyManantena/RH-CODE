<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:fragment="header">
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>R.H Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" th:href="@{/vendors/feather/feather.css}">
    <link rel="stylesheet" th:href="@{/vendors/ti-icons/css/themify-icons.css}">
    <link rel="stylesheet" th:href="@{/vendors/css/vendor.bundle.base.css}">
    <link rel="stylesheet" th:href="@{/css/vertical-layout-light/style.css}">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- endinject -->
    <link rel="shortcut icon" th:href="@{/images/favicon.png}" />
</head>

<body>
    <div class="container-scroller">
        <!-- partial:../../partials/_navbar.html -->
        <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row" th:fragment="navbar">
            <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
                <a class="navbar-brand brand-logo mr-5">R.H Admin</a>
                <a class="navbar-brand brand-logo-mini">RH</a>
            </div>
            <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
                <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                    <span class="icon-menu"></span>
                </button>
                <ul class="navbar-nav navbar-nav-right">
                    <li class="nav-item dropdown">
                        <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#"
                            data-toggle="dropdown">
                            <i class="icon-bell mx-0"></i>
                            <span class="count"></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
                            aria-labelledby="notificationDropdown">
                            <p class="mb-0 font-weight-normal float-left dropdown-header">Notifications</p>
                            <a class="dropdown-item preview-item">
                                <div class="preview-thumbnail">
                                    <div class="preview-icon bg-success">
                                        <i class="ti-info-alt mx-0"></i>
                                    </div>
                                </div>
                                <div class="preview-item-content">
                                    <h6 class="preview-subject font-weight-normal">Application Error</h6>
                                    <p class="font-weight-light small-text mb-0 text-muted">Just now</p>
                                </div>
                            </a>
                            <!-- Other notifications -->
                        </div>
                    </li>
                    <li class="nav-item nav-profile dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                            <img th:src="@{/images/faces/face28.jpg}" alt="profile" />
                        </a>
                        <div class="dropdown-menu dropdown-menu-right navbar-dropdown"
                            aria-labelledby="profileDropdown">
                            <a class="dropdown-item">
                                <i class="ti-power-off text-primary"></i>
                                Logout
                            </a>
                        </div>
                    </li>
                </ul>
                <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
                    data-toggle="offcanvas">
                    <span class="icon-menu"></span>
                </button>
            </div>
        </nav>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:../../partials/_settings-panel.html -->
            <div class="theme-setting-wrapper">
                <nav class="sidebar sidebar-offcanvas" id="sidebar" th:fragment="sidebar">
                    <ul class="nav">
                        <!-- <li class="nav-item">
                            <a class="nav-link" href="/creationOffre">
                                <i class="icon-grid menu-icon"></i>
                                <span class="menu-title">Creation Offre</span>
                            </a>
                        </li> -->
                        <li class="nav-item">
                            <a class="nav-link" href="/candidatures">
                                <i class="icon-grid menu-icon"></i>
                                <span class="menu-title">Candidatures</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/besoinRecrutement">
                                <i class="icon-grid menu-icon"></i>
                                <span class="menu-title">liste besoin</span>
                            </a>
                        </li>
                    </ul>
                </nav>

            </div>
            <div class="main-panel">
                <div class="content-wrapper" th:replace="~{${pageContent}::content}">
                </div>
            </div>
        </div>
        <!-- Modal (initialement cachée) -->


        <script src="../../vendors/js/vendor.bundle.base.js"></script>
        <script src="../../vendors/typeahead.js/typeahead.bundle.min.js"></script>
        <script src="../../vendors/select2/select2.min.js"></script>
        <script src="../../js/off-canvas.js"></script>
        <script src="../../js/hoverable-collapse.js"></script>
        <script src="../../js/template.js"></script>
        <script src="../../js/settings.js"></script>
        <script src="../../js/todolist.js"></script>
        <script src="../../js/file-upload.js"></script>
        <script src="../../js/typeahead.js"></script>
        <script src="../../js/select2.js"></script>
        <!-- Bootstrap JS Bundle (inclut Popper.js pour les dropdowns) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>


        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2>Informations sur la Candidature</h2>

                <!-- Contenu dynamique de la modal -->
                <div id="modalContent"></div>

                <!-- Section des boutons -->
                <div class="modal-actions">
                    <button id="autoEvaluate" class="button">Évaluer
                        automatiquement</button>
                    <a id="manualEvaluate" href="#">
                        <button class="button button-secondary">Évaluer manuellement</button>
                    </a>
                </div>
            </div>
        </div>


        <!-- Style amélioré pour la modal -->
        <style>
            /* Fond semi-transparent */
            .modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.6);
                padding-top: 60px;
                transition: opacity 0.3s ease-in-out;
            }

            /* Contenu de la modal */
            .modal-content {
                background-color: #fff;
                margin: 5% auto;
                padding: 30px;
                border-radius: 15px;
                width: 50%;
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
                position: relative;
                animation: fadeIn 0.5s ease-in-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(-10%);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .close {
                color: #aaa;
                font-size: 28px;
                font-weight: bold;
                position: absolute;
                top: 15px;
                right: 20px;
                cursor: pointer;
            }

            .close:hover {
                color: black;
            }

            .modal-content h2 {
                color: #333;
                font-size: 26px;
                text-align: center;
                margin-bottom: 20px;
            }

            .modal-content p {
                color: #666;
                font-size: 16px;
                margin: 10px 0;
            }

            .modal-content p strong {
                color: #333;
            }

            /* Actions de la modal */
            .modal-actions {
                margin-top: 20px;
                text-align: center;
            }

            .button {
                background-color: #007BFF;
                color: #fff;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                margin: 5px;
                text-decoration: none;
            }

            .button-secondary {
                background-color: #6c757d;
            }

            .button:hover {
                background-color: #0056b3;
            }

            .button-secondary:hover {
                background-color: #5a6268;
            }
        </style>
        <script>
            function showModal(row) {
                // Récupérer les données dynamiques de l'attribut data-* de la ligne
                var cvNom = row.getAttribute('data-nom');
                var cvPrenom = row.getAttribute('data-prenom');
                var cvDateNaissance = row.getAttribute('data-date-naissance');
                var cvEmail = row.getAttribute('data-email');
                var nivDiplome = row.getAttribute('data-niveauDiplome');
                var libDiplome = row.getAttribute('data-libDiplome');
                var anneeExp = row.getAttribute('data-annee-experience');
                var statut = row.getAttribute('data-statutCandidature');
                var competence = row.getAttribute('data-competence');
                var id = row.getAttribute('data-id');
                var idStatut = row.getAttribute('data-idStatut');

                // Préparer le contenu dynamique pour la modal
                var modalContent = `
        <h3>Candidat : ${cvNom} ${cvPrenom}</h3>
        <p><strong>Date de naissance : </strong>${cvDateNaissance}</p>
        <p><strong>Email : </strong>${cvEmail}</p>
        <p><strong>Diplome : </strong>${nivDiplome} en ${libDiplome}</p>
        <p><strong>Année d'expérience : </strong>${anneeExp} années</p>
        <p><strong>Compétences : </strong>${competence}</p>
        <p><strong>Statut candidature : </strong>${statut}</p>
    `;

                // Injecter le contenu
                document.getElementById('modalContent').innerHTML = modalContent;

                // Récupérer les boutons
                const autoEvaluateButton = document.getElementById('autoEvaluate');
                const manualEvaluateButton = document.getElementById('manualEvaluate');

                // Définir les conditions pour afficher ou masquer les boutons
                if (idStatut != 4 && idStatut != 3) { // Conditions pour afficher les boutons
                    autoEvaluateButton.style.display = 'inline-block';
                    manualEvaluateButton.style.display = 'inline-block';
                    manualEvaluateButton.href = `/evaluation?idCandidature=${id}`;
                } else { // Masquer les boutons si conditions non remplies
                    autoEvaluateButton.style.display = 'none';
                    manualEvaluateButton.style.display = 'none';
                }

                // Afficher la modal
                document.getElementById('myModal').style.display = "block";
            }

            function closeModal() {
                document.getElementById('myModal').style.display = "none";
            }



        </script>
        <script src="../../Js_back_office/evaluation.js"></script>
        <script src="../../js2/jquery.min.js"></script>
        <script src="../../js2/bootstrap.bundle.js"></script>
        <script src="../../nodeModules/sweetalert2/dist/sweetalert2.all.js"></script>
        <script src="../../Js_back_office/evaluation.js"></script>



</body>

</html>